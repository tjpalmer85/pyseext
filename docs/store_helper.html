---
layout: template
title: API - pyseext.store_helper
permalink: /api//store_helper
link_group: api
---
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="pyseext" href="index.html">pyseext</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="pyseext.store_helper.StoreHelper" href="#pyseext.store_helper.StoreHelper">StoreHelper</a></code></h4>
<ul class="">
<li><code><a title="pyseext.store_helper.StoreHelper.reset_store_load_count" href="#pyseext.store_helper.StoreHelper.reset_store_load_count">reset_store_load_count</a></code></li>
<li><code><a title="pyseext.store_helper.StoreHelper.trigger_reload" href="#pyseext.store_helper.StoreHelper.trigger_reload">trigger_reload</a></code></li>
<li><code><a title="pyseext.store_helper.StoreHelper.trigger_reload_and_wait" href="#pyseext.store_helper.StoreHelper.trigger_reload_and_wait">trigger_reload_and_wait</a></code></li>
<li><code><a title="pyseext.store_helper.StoreHelper.wait_for_store_loaded" href="#pyseext.store_helper.StoreHelper.wait_for_store_loaded">wait_for_store_loaded</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<article id="content">
<header>
<h1 class="title">Module <code>pyseext.store_helper</code></h1>
</header>
<section id="section-intro">
<p>Module that contains our StoreHelper class.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/westy/pyseext/blob/master/pyseext/store_helper.py#L1-L109" class="git-link">View at GitHub</a>
</summary>
<pre><code class="python">&#34;&#34;&#34;
Module that contains our StoreHelper class.
&#34;&#34;&#34;
import logging

from selenium.webdriver.remote.webdriver import WebDriver

from pyseext.has_referenced_javascript import HasReferencedJavaScript

class StoreHelper(HasReferencedJavaScript):
    &#34;&#34;&#34;A class to help with using stores, through Ext&#39;s interfaces.
    &#34;&#34;&#34;

    # Class variables
    _RESET_STORE_LOAD_COUNT_TEMPLATE: str = &#34;return globalThis.PySeExt.StoreHelper.resetStoreLoadCount(&#39;{store_holder_cq}&#39;)&#34;
    &#34;&#34;&#34;The script template to use to call the JavaScript method PySeExt.StoreHelper.resetStoreLoadCount
    Requires the inserts: {store_holder_cq}&#34;&#34;&#34;

    _WAIT_FOR_STORE_LOADED_TEMPLATE: str = &#34;return globalThis.PySeExt.StoreHelper.waitForStoreLoaded(&#39;{store_holder_cq}&#39;, callback)&#34;
    &#34;&#34;&#34;The script template to use to call the asynchronous JavaScript method PySeExt.StoreHelper.waitForStoreLoaded
    Requires the inserts: {store_holder_cq}

    Use our base classes `get_async_script_content` method call it.&#34;&#34;&#34;

    _RELOAD_STORE_TEMPLATE: str = &#34;return globalThis.PySeExt.StoreHelper.reload(&#39;{store_holder_cq}&#39;)&#34;
    &#34;&#34;&#34;The script template to use to call the JavaScript method PySeExt.StoreHelper.reload
    Requires the inserts: {store_holder_cq}&#34;&#34;&#34;

    def __init__(self, driver: WebDriver):
        &#34;&#34;&#34;Initialises an instance of this class

        Args:
            driver (WebDriver): The webdriver to use
        &#34;&#34;&#34;
        self._logger = logging.getLogger(__name__)
        &#34;&#34;&#34;The Logger instance for this class instance&#34;&#34;&#34;

        self._driver = driver
        &#34;&#34;&#34;The WebDriver instance for this class instance&#34;&#34;&#34;

        # Initialise our base class
        super().__init__(driver, self._logger)

    def reset_store_load_count(self, store_holder_cq: str):
        &#34;&#34;&#34;Resets the load count on the specified store, provided the store is not configured with autoLoad set to true.

        If set to auto load then this method does nothing.

        The load count on a store is incremented everytime a load occurs. It is not reset when the data is cleared.
        A store&#39;s isLoaded method returns true if the load count is greater than zero.

        Calling this method is useful to use before performing an action that will trigger a load, since you can then
        wait for the stores isLoaded method to return true.
        This is far more reliable than waiting for the load event, since it may have already been fired by the time the
        test gets that far.

        Args:
            store_holder_cq (str): The component query to use to find the store holder.
        &#34;&#34;&#34;
        self._logger.debug(&#34;Resetting loadCount on store owned by &#39;%s&#39;&#34;, store_holder_cq)

        script = self._RESET_STORE_LOAD_COUNT_TEMPLATE.format(store_holder_cq=store_holder_cq)
        self.ensure_javascript_loaded()
        self._driver.execute_script(script)

    def wait_for_store_loaded(self, store_holder_cq: str):
        &#34;&#34;&#34; Waits for the specified store to return true from its isLoaded method.

        Should generally be used after calling #resetStoreLoadCount and performing an
        action that triggers a store load.

        Args:
            store_holder_cq (str): The component query to use to find the store holder.
        &#34;&#34;&#34;
        self._logger.debug(&#34;Waiting for store owned by &#39;%s&#39; to load&#34;, store_holder_cq)

        async_script = self.get_async_script_content(self._WAIT_FOR_STORE_LOADED_TEMPLATE).format(store_holder_cq=store_holder_cq)
        self.ensure_javascript_loaded()
        self._driver.execute_async_script(async_script)

        self._logger.debug(&#34;Store owned by &#39;%s&#39; loaded&#34;, store_holder_cq)

    def trigger_reload(self, store_holder_cq: str):
        &#34;&#34;&#34;Triggers a reload on the specified store.

        Args:
            store_holder_cq (str): The component query to use to find the store holder.
        &#34;&#34;&#34;
        script = self._RELOAD_STORE_TEMPLATE.format(store_holder_cq=store_holder_cq)
        self.ensure_javascript_loaded()
        self._driver.execute_script(script)

    def trigger_reload_and_wait(self, store_holder_cq: str):
        &#34;&#34;&#34;Triggers a load on the specified store and waits for it to complete.

        Basically resets the store load count, triggers a reload and then waits for the store to
        show as loaded.

        Args:
            store_holder_cq (str): The component query to use to find the store holder.
        &#34;&#34;&#34;
        self.reset_store_load_count(store_holder_cq)
        self.trigger_reload(store_holder_cq)
        self.wait_for_store_loaded(store_holder_cq)

    # FIXME: Some method ideas:
    # .....:    - check_store_contains(self, store_holder_cq: str, data: list[dict], should_only_contain_specified_data: bool = False)= &gt; bool
    # .....:        Method that checks that the store contains the specified data, and optionally only the specified data.
    # .....:        Can be used to check combobox data, say.</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="pyseext.store_helper.StoreHelper"><code class="flex name class">
<span>class <span class="ident">StoreHelper</span></span>
<span>(</span><span>driver: selenium.webdriver.remote.webdriver.WebDriver)</span>
</code></dt>
<dd>
<section class="desc"><p>A class to help with using stores, through Ext's interfaces.</p>
<p>Initialises an instance of this class</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>driver</code></strong> :&ensp;<code>WebDriver</code></dt>
<dd>The webdriver to use</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/westy/pyseext/blob/master/pyseext/store_helper.py#L10-L109" class="git-link">View at GitHub</a>
</summary>
<pre><code class="python">class StoreHelper(HasReferencedJavaScript):
    &#34;&#34;&#34;A class to help with using stores, through Ext&#39;s interfaces.
    &#34;&#34;&#34;

    # Class variables
    _RESET_STORE_LOAD_COUNT_TEMPLATE: str = &#34;return globalThis.PySeExt.StoreHelper.resetStoreLoadCount(&#39;{store_holder_cq}&#39;)&#34;
    &#34;&#34;&#34;The script template to use to call the JavaScript method PySeExt.StoreHelper.resetStoreLoadCount
    Requires the inserts: {store_holder_cq}&#34;&#34;&#34;

    _WAIT_FOR_STORE_LOADED_TEMPLATE: str = &#34;return globalThis.PySeExt.StoreHelper.waitForStoreLoaded(&#39;{store_holder_cq}&#39;, callback)&#34;
    &#34;&#34;&#34;The script template to use to call the asynchronous JavaScript method PySeExt.StoreHelper.waitForStoreLoaded
    Requires the inserts: {store_holder_cq}

    Use our base classes `get_async_script_content` method call it.&#34;&#34;&#34;

    _RELOAD_STORE_TEMPLATE: str = &#34;return globalThis.PySeExt.StoreHelper.reload(&#39;{store_holder_cq}&#39;)&#34;
    &#34;&#34;&#34;The script template to use to call the JavaScript method PySeExt.StoreHelper.reload
    Requires the inserts: {store_holder_cq}&#34;&#34;&#34;

    def __init__(self, driver: WebDriver):
        &#34;&#34;&#34;Initialises an instance of this class

        Args:
            driver (WebDriver): The webdriver to use
        &#34;&#34;&#34;
        self._logger = logging.getLogger(__name__)
        &#34;&#34;&#34;The Logger instance for this class instance&#34;&#34;&#34;

        self._driver = driver
        &#34;&#34;&#34;The WebDriver instance for this class instance&#34;&#34;&#34;

        # Initialise our base class
        super().__init__(driver, self._logger)

    def reset_store_load_count(self, store_holder_cq: str):
        &#34;&#34;&#34;Resets the load count on the specified store, provided the store is not configured with autoLoad set to true.

        If set to auto load then this method does nothing.

        The load count on a store is incremented everytime a load occurs. It is not reset when the data is cleared.
        A store&#39;s isLoaded method returns true if the load count is greater than zero.

        Calling this method is useful to use before performing an action that will trigger a load, since you can then
        wait for the stores isLoaded method to return true.
        This is far more reliable than waiting for the load event, since it may have already been fired by the time the
        test gets that far.

        Args:
            store_holder_cq (str): The component query to use to find the store holder.
        &#34;&#34;&#34;
        self._logger.debug(&#34;Resetting loadCount on store owned by &#39;%s&#39;&#34;, store_holder_cq)

        script = self._RESET_STORE_LOAD_COUNT_TEMPLATE.format(store_holder_cq=store_holder_cq)
        self.ensure_javascript_loaded()
        self._driver.execute_script(script)

    def wait_for_store_loaded(self, store_holder_cq: str):
        &#34;&#34;&#34; Waits for the specified store to return true from its isLoaded method.

        Should generally be used after calling #resetStoreLoadCount and performing an
        action that triggers a store load.

        Args:
            store_holder_cq (str): The component query to use to find the store holder.
        &#34;&#34;&#34;
        self._logger.debug(&#34;Waiting for store owned by &#39;%s&#39; to load&#34;, store_holder_cq)

        async_script = self.get_async_script_content(self._WAIT_FOR_STORE_LOADED_TEMPLATE).format(store_holder_cq=store_holder_cq)
        self.ensure_javascript_loaded()
        self._driver.execute_async_script(async_script)

        self._logger.debug(&#34;Store owned by &#39;%s&#39; loaded&#34;, store_holder_cq)

    def trigger_reload(self, store_holder_cq: str):
        &#34;&#34;&#34;Triggers a reload on the specified store.

        Args:
            store_holder_cq (str): The component query to use to find the store holder.
        &#34;&#34;&#34;
        script = self._RELOAD_STORE_TEMPLATE.format(store_holder_cq=store_holder_cq)
        self.ensure_javascript_loaded()
        self._driver.execute_script(script)

    def trigger_reload_and_wait(self, store_holder_cq: str):
        &#34;&#34;&#34;Triggers a load on the specified store and waits for it to complete.

        Basically resets the store load count, triggers a reload and then waits for the store to
        show as loaded.

        Args:
            store_holder_cq (str): The component query to use to find the store holder.
        &#34;&#34;&#34;
        self.reset_store_load_count(store_holder_cq)
        self.trigger_reload(store_holder_cq)
        self.wait_for_store_loaded(store_holder_cq)

    # FIXME: Some method ideas:
    # .....:    - check_store_contains(self, store_holder_cq: str, data: list[dict], should_only_contain_specified_data: bool = False)= &gt; bool
    # .....:        Method that checks that the store contains the specified data, and optionally only the specified data.
    # .....:        Can be used to check combobox data, say.</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="pyseext.has_referenced_javascript.HasReferencedJavaScript" href="has_referenced_javascript.html#pyseext.has_referenced_javascript.HasReferencedJavaScript">HasReferencedJavaScript</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="pyseext.store_helper.StoreHelper.reset_store_load_count">
<code class="name flex">
<span>def <span class="ident">reset_store_load_count</span></span>(<span>self, store_holder_cq: str)</span>
</code>
</dt>
<dd>
<section class="desc"><p>Resets the load count on the specified store, provided the store is not configured with autoLoad set to true.</p>
<p>If set to auto load then this method does nothing.</p>
<p>The load count on a store is incremented everytime a load occurs. It is not reset when the data is cleared.
A store's isLoaded method returns true if the load count is greater than zero.</p>
<p>Calling this method is useful to use before performing an action that will trigger a load, since you can then
wait for the stores isLoaded method to return true.
This is far more reliable than waiting for the load event, since it may have already been fired by the time the
test gets that far.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>store_holder_cq</code></strong> :&ensp;<code>str</code></dt>
<dd>The component query to use to find the store holder.</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/westy/pyseext/blob/master/pyseext/store_helper.py#L44-L64" class="git-link">View at GitHub</a>
</summary>
<pre><code class="python">def reset_store_load_count(self, store_holder_cq: str):
    &#34;&#34;&#34;Resets the load count on the specified store, provided the store is not configured with autoLoad set to true.

    If set to auto load then this method does nothing.

    The load count on a store is incremented everytime a load occurs. It is not reset when the data is cleared.
    A store&#39;s isLoaded method returns true if the load count is greater than zero.

    Calling this method is useful to use before performing an action that will trigger a load, since you can then
    wait for the stores isLoaded method to return true.
    This is far more reliable than waiting for the load event, since it may have already been fired by the time the
    test gets that far.

    Args:
        store_holder_cq (str): The component query to use to find the store holder.
    &#34;&#34;&#34;
    self._logger.debug(&#34;Resetting loadCount on store owned by &#39;%s&#39;&#34;, store_holder_cq)

    script = self._RESET_STORE_LOAD_COUNT_TEMPLATE.format(store_holder_cq=store_holder_cq)
    self.ensure_javascript_loaded()
    self._driver.execute_script(script)</code></pre>
</details>
</dd>
<dt id="pyseext.store_helper.StoreHelper.trigger_reload">
<code class="name flex">
<span>def <span class="ident">trigger_reload</span></span>(<span>self, store_holder_cq: str)</span>
</code>
</dt>
<dd>
<section class="desc"><p>Triggers a reload on the specified store.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>store_holder_cq</code></strong> :&ensp;<code>str</code></dt>
<dd>The component query to use to find the store holder.</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/westy/pyseext/blob/master/pyseext/store_helper.py#L83-L91" class="git-link">View at GitHub</a>
</summary>
<pre><code class="python">def trigger_reload(self, store_holder_cq: str):
    &#34;&#34;&#34;Triggers a reload on the specified store.

    Args:
        store_holder_cq (str): The component query to use to find the store holder.
    &#34;&#34;&#34;
    script = self._RELOAD_STORE_TEMPLATE.format(store_holder_cq=store_holder_cq)
    self.ensure_javascript_loaded()
    self._driver.execute_script(script)</code></pre>
</details>
</dd>
<dt id="pyseext.store_helper.StoreHelper.trigger_reload_and_wait">
<code class="name flex">
<span>def <span class="ident">trigger_reload_and_wait</span></span>(<span>self, store_holder_cq: str)</span>
</code>
</dt>
<dd>
<section class="desc"><p>Triggers a load on the specified store and waits for it to complete.</p>
<p>Basically resets the store load count, triggers a reload and then waits for the store to
show as loaded.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>store_holder_cq</code></strong> :&ensp;<code>str</code></dt>
<dd>The component query to use to find the store holder.</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/westy/pyseext/blob/master/pyseext/store_helper.py#L93-L104" class="git-link">View at GitHub</a>
</summary>
<pre><code class="python">def trigger_reload_and_wait(self, store_holder_cq: str):
    &#34;&#34;&#34;Triggers a load on the specified store and waits for it to complete.

    Basically resets the store load count, triggers a reload and then waits for the store to
    show as loaded.

    Args:
        store_holder_cq (str): The component query to use to find the store holder.
    &#34;&#34;&#34;
    self.reset_store_load_count(store_holder_cq)
    self.trigger_reload(store_holder_cq)
    self.wait_for_store_loaded(store_holder_cq)</code></pre>
</details>
</dd>
<dt id="pyseext.store_helper.StoreHelper.wait_for_store_loaded">
<code class="name flex">
<span>def <span class="ident">wait_for_store_loaded</span></span>(<span>self, store_holder_cq: str)</span>
</code>
</dt>
<dd>
<section class="desc"><p>Waits for the specified store to return true from its isLoaded method.</p>
<p>Should generally be used after calling #resetStoreLoadCount and performing an
action that triggers a store load.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>store_holder_cq</code></strong> :&ensp;<code>str</code></dt>
<dd>The component query to use to find the store holder.</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/westy/pyseext/blob/master/pyseext/store_helper.py#L66-L81" class="git-link">View at GitHub</a>
</summary>
<pre><code class="python">def wait_for_store_loaded(self, store_holder_cq: str):
    &#34;&#34;&#34; Waits for the specified store to return true from its isLoaded method.

    Should generally be used after calling #resetStoreLoadCount and performing an
    action that triggers a store load.

    Args:
        store_holder_cq (str): The component query to use to find the store holder.
    &#34;&#34;&#34;
    self._logger.debug(&#34;Waiting for store owned by &#39;%s&#39; to load&#34;, store_holder_cq)

    async_script = self.get_async_script_content(self._WAIT_FOR_STORE_LOADED_TEMPLATE).format(store_holder_cq=store_holder_cq)
    self.ensure_javascript_loaded()
    self._driver.execute_async_script(async_script)

    self._logger.debug(&#34;Store owned by &#39;%s&#39; loaded&#34;, store_holder_cq)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="pyseext.has_referenced_javascript.HasReferencedJavaScript" href="has_referenced_javascript.html#pyseext.has_referenced_javascript.HasReferencedJavaScript">HasReferencedJavaScript</a></b></code>:
<ul class="hlist">
<li><code><a title="pyseext.has_referenced_javascript.HasReferencedJavaScript.JavaScriptLoadedExpectation" href="has_referenced_javascript.html#pyseext.has_referenced_javascript.HasReferencedJavaScript.JavaScriptLoadedExpectation">JavaScriptLoadedExpectation</a></code></li>
<li><code><a title="pyseext.has_referenced_javascript.HasReferencedJavaScript.ensure_javascript_loaded" href="has_referenced_javascript.html#pyseext.has_referenced_javascript.HasReferencedJavaScript.ensure_javascript_loaded">ensure_javascript_loaded</a></code></li>
<li><code><a title="pyseext.has_referenced_javascript.HasReferencedJavaScript.get_async_script_content" href="has_referenced_javascript.html#pyseext.has_referenced_javascript.HasReferencedJavaScript.get_async_script_content">get_async_script_content</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite>.</p>
</footer>