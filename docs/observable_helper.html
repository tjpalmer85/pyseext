---
layout: template
title: API - pyseext.observable_helper
permalink: /api//observable_helper
link_group: api
---
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="pyseext" href="index.html">pyseext</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="pyseext.observable_helper.ObservableHelper" href="#pyseext.observable_helper.ObservableHelper">ObservableHelper</a></code></h4>
<ul class="">
<li><code><a title="pyseext.observable_helper.ObservableHelper.WaitForEventException" href="#pyseext.observable_helper.ObservableHelper.WaitForEventException">WaitForEventException</a></code></li>
<li><code><a title="pyseext.observable_helper.ObservableHelper.wait_for_event" href="#pyseext.observable_helper.ObservableHelper.wait_for_event">wait_for_event</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<article id="content">
<header>
<h1 class="title">Module <code>pyseext.observable_helper</code></h1>
</header>
<section id="section-intro">
<p>Module that contains our ObservableHelper class.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/westy/pyseext/blob/master/pyseext/observable_helper.py#L1-L111" class="git-link">View at GitHub</a>
</summary>
<pre><code class="python">&#34;&#34;&#34;
Module that contains our ObservableHelper class.
&#34;&#34;&#34;
import logging
from typing import Union

from selenium.webdriver.remote.webdriver import WebDriver

from pyseext.has_referenced_javascript import HasReferencedJavaScript

class ObservableHelper(HasReferencedJavaScript):
    &#34;&#34;&#34;A class to help with observable objects in Ext.
    &#34;&#34;&#34;

    _WAIT_FOR_EVENT_TEMPLATE: str = &#34;return globalThis.PySeExt.ObservableHelper.waitForEvent(&#39;{component_cq}&#39;, &#39;{event_name}&#39;, {timeout}, {member_accessor}, callback)&#34;
    &#34;&#34;&#34;The script template to use to call the asynchronous JavaScript method PySeExt.ObservableHelper.waitForEvent
    Requires the inserts: {component_cq}, {event_name}, {timeout}, {member_accessor}

    Use our base classes `get_async_script_content` method call it..&#34;&#34;&#34;

    def __init__(self, driver: WebDriver):
        &#34;&#34;&#34;Initialises an instance of this class.

        Args:
            driver (WebDriver): The webdriver to use.
        &#34;&#34;&#34;

        # Instance variables
        self._logger = logging.getLogger(__name__)
        &#34;&#34;&#34;The Logger instance for this class instance&#34;&#34;&#34;

        self._driver = driver
        &#34;&#34;&#34;The WebDriver instance for this class instance&#34;&#34;&#34;

        # Initialise our base class
        super().__init__(driver, self._logger)

    def wait_for_event(self, component_cq: str, event_name: str, timeout: float = 10, member_accessor: Union[str, None] = None):
        &#34;&#34;&#34;Method to find an observable using a component query, optionally access a member on it (to get an owned observable),
        and then wait for an event with the specified name.

        Returns when the event has been caught, or throws if the timeout was reached or the observable could not be found or resolve to a single object.

        Args:
            component_cq (str): The component query to find the observable object, or the owner of the observable member.
            event_name (str): The name of the event to wait for.
            timeout (float, optional): The maximum amount of time to wait for the event, in seconds. Defaults to 10.
            member_accessor (str, optional): The name of the member to access on the component to find the observable to watch. Defaults to None.
        &#34;&#34;&#34;
        if member_accessor:
            self._logger.debug(&#34;Waiting for event &#39;%s&#39; on &#39;%s[%s]&#39;&#34;, event_name, component_cq, member_accessor)
            # Wrap in quotes
            member_accessor = f&#34;&#39;{member_accessor}&#39;&#34;
        else:
            self._logger.debug(&#34;Waiting for event &#39;%s&#39; on &#39;%s&#39;&#34;, event_name, component_cq)
            member_accessor = &#39;undefined&#39;

        async_script = self.get_async_script_content(self._WAIT_FOR_EVENT_TEMPLATE).format(component_cq = component_cq,
                                                                                           event_name =  event_name,
                                                                                           timeout = timeout,
                                                                                           member_accessor = member_accessor)
        self.ensure_javascript_loaded()

        result = self._driver.execute_async_script(async_script)

        if isinstance(result, str):
            # An error has been returned!
            raise ObservableHelper.WaitForEventException(component_cq, event_name, member_accessor, result)

        if member_accessor:
            self._logger.debug(&#34;Event &#39;%s&#39; on &#39;%s[%s]&#39; received!&#34;, event_name, component_cq, member_accessor)
        else:
            self._logger.debug(&#34;Event &#39;%s&#39; on &#39;%s&#39; received!&#34;, event_name, component_cq)

    class WaitForEventException(Exception):
        &#34;&#34;&#34;Exception class thrown when waiting for event returned an error.
        &#34;&#34;&#34;

        def __init__(self, component_cq: str, event_name: str, member_accessor: str, error: str):
            &#34;&#34;&#34;Initialises an instance of this exception

            Args:
                component_cq (str): The component query to find the observable object, or the owner of the observable member.
                event_name (str): The name of the event to wait for.
                member_accessor (str): The name of the member to access on the component to find the observable to watch.
                error (str): The error that was returned from the JavaScript.
            &#34;&#34;&#34;
            self._component_cq = component_cq
            self._event_name = event_name
            self._member_accessor = member_accessor
            self._error = error

            if member_accessor:
                self.message = &#34;Waiting for event &#39;{event_name}&#39; on &#39;{component_cq}[{member_accessor}]&#39; failed with error: {error}&#34;
            else:
                self.message = &#34;Waiting for event &#39;{event_name}&#39; on &#39;{component_cq}&#39; failed with error: {error}&#34;

            super().__init__(self.message)

        def __str__(self):
            &#34;&#34;&#34;Returns a string representation of this exception
            &#34;&#34;&#34;
            if self._member_accessor:
                return self.message.format(event_name = self._event_name,
                                           component_cq = self._component_cq,
                                           member_accessor = self._member_accessor,
                                           error = self._error)

            return self.message.format(event_name = self._event_name,
                                        component_cq = self._component_cq,
                                        error = self._error)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="pyseext.observable_helper.ObservableHelper"><code class="flex name class">
<span>class <span class="ident">ObservableHelper</span></span>
<span>(</span><span>driver: selenium.webdriver.remote.webdriver.WebDriver)</span>
</code></dt>
<dd>
<section class="desc"><p>A class to help with observable objects in Ext.</p>
<p>Initialises an instance of this class.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>driver</code></strong> :&ensp;<code>WebDriver</code></dt>
<dd>The webdriver to use.</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/westy/pyseext/blob/master/pyseext/observable_helper.py#L11-L111" class="git-link">View at GitHub</a>
</summary>
<pre><code class="python">class ObservableHelper(HasReferencedJavaScript):
    &#34;&#34;&#34;A class to help with observable objects in Ext.
    &#34;&#34;&#34;

    _WAIT_FOR_EVENT_TEMPLATE: str = &#34;return globalThis.PySeExt.ObservableHelper.waitForEvent(&#39;{component_cq}&#39;, &#39;{event_name}&#39;, {timeout}, {member_accessor}, callback)&#34;
    &#34;&#34;&#34;The script template to use to call the asynchronous JavaScript method PySeExt.ObservableHelper.waitForEvent
    Requires the inserts: {component_cq}, {event_name}, {timeout}, {member_accessor}

    Use our base classes `get_async_script_content` method call it..&#34;&#34;&#34;

    def __init__(self, driver: WebDriver):
        &#34;&#34;&#34;Initialises an instance of this class.

        Args:
            driver (WebDriver): The webdriver to use.
        &#34;&#34;&#34;

        # Instance variables
        self._logger = logging.getLogger(__name__)
        &#34;&#34;&#34;The Logger instance for this class instance&#34;&#34;&#34;

        self._driver = driver
        &#34;&#34;&#34;The WebDriver instance for this class instance&#34;&#34;&#34;

        # Initialise our base class
        super().__init__(driver, self._logger)

    def wait_for_event(self, component_cq: str, event_name: str, timeout: float = 10, member_accessor: Union[str, None] = None):
        &#34;&#34;&#34;Method to find an observable using a component query, optionally access a member on it (to get an owned observable),
        and then wait for an event with the specified name.

        Returns when the event has been caught, or throws if the timeout was reached or the observable could not be found or resolve to a single object.

        Args:
            component_cq (str): The component query to find the observable object, or the owner of the observable member.
            event_name (str): The name of the event to wait for.
            timeout (float, optional): The maximum amount of time to wait for the event, in seconds. Defaults to 10.
            member_accessor (str, optional): The name of the member to access on the component to find the observable to watch. Defaults to None.
        &#34;&#34;&#34;
        if member_accessor:
            self._logger.debug(&#34;Waiting for event &#39;%s&#39; on &#39;%s[%s]&#39;&#34;, event_name, component_cq, member_accessor)
            # Wrap in quotes
            member_accessor = f&#34;&#39;{member_accessor}&#39;&#34;
        else:
            self._logger.debug(&#34;Waiting for event &#39;%s&#39; on &#39;%s&#39;&#34;, event_name, component_cq)
            member_accessor = &#39;undefined&#39;

        async_script = self.get_async_script_content(self._WAIT_FOR_EVENT_TEMPLATE).format(component_cq = component_cq,
                                                                                           event_name =  event_name,
                                                                                           timeout = timeout,
                                                                                           member_accessor = member_accessor)
        self.ensure_javascript_loaded()

        result = self._driver.execute_async_script(async_script)

        if isinstance(result, str):
            # An error has been returned!
            raise ObservableHelper.WaitForEventException(component_cq, event_name, member_accessor, result)

        if member_accessor:
            self._logger.debug(&#34;Event &#39;%s&#39; on &#39;%s[%s]&#39; received!&#34;, event_name, component_cq, member_accessor)
        else:
            self._logger.debug(&#34;Event &#39;%s&#39; on &#39;%s&#39; received!&#34;, event_name, component_cq)

    class WaitForEventException(Exception):
        &#34;&#34;&#34;Exception class thrown when waiting for event returned an error.
        &#34;&#34;&#34;

        def __init__(self, component_cq: str, event_name: str, member_accessor: str, error: str):
            &#34;&#34;&#34;Initialises an instance of this exception

            Args:
                component_cq (str): The component query to find the observable object, or the owner of the observable member.
                event_name (str): The name of the event to wait for.
                member_accessor (str): The name of the member to access on the component to find the observable to watch.
                error (str): The error that was returned from the JavaScript.
            &#34;&#34;&#34;
            self._component_cq = component_cq
            self._event_name = event_name
            self._member_accessor = member_accessor
            self._error = error

            if member_accessor:
                self.message = &#34;Waiting for event &#39;{event_name}&#39; on &#39;{component_cq}[{member_accessor}]&#39; failed with error: {error}&#34;
            else:
                self.message = &#34;Waiting for event &#39;{event_name}&#39; on &#39;{component_cq}&#39; failed with error: {error}&#34;

            super().__init__(self.message)

        def __str__(self):
            &#34;&#34;&#34;Returns a string representation of this exception
            &#34;&#34;&#34;
            if self._member_accessor:
                return self.message.format(event_name = self._event_name,
                                           component_cq = self._component_cq,
                                           member_accessor = self._member_accessor,
                                           error = self._error)

            return self.message.format(event_name = self._event_name,
                                        component_cq = self._component_cq,
                                        error = self._error)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="pyseext.has_referenced_javascript.HasReferencedJavaScript" href="has_referenced_javascript.html#pyseext.has_referenced_javascript.HasReferencedJavaScript">HasReferencedJavaScript</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="pyseext.observable_helper.ObservableHelper.WaitForEventException"><code class="name">var <span class="ident">WaitForEventException</span></code></dt>
<dd>
<section class="desc"><p>Exception class thrown when waiting for event returned an error.</p></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="pyseext.observable_helper.ObservableHelper.wait_for_event">
<code class="name flex">
<span>def <span class="ident">wait_for_event</span></span>(<span>self, component_cq: str, event_name: str, timeout: float = 10, member_accessor: Optional[str] = None)</span>
</code>
</dt>
<dd>
<section class="desc"><p>Method to find an observable using a component query, optionally access a member on it (to get an owned observable),
and then wait for an event with the specified name.</p>
<p>Returns when the event has been caught, or throws if the timeout was reached or the observable could not be found or resolve to a single object.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>component_cq</code></strong> :&ensp;<code>str</code></dt>
<dd>The component query to find the observable object, or the owner of the observable member.</dd>
<dt><strong><code>event_name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the event to wait for.</dd>
<dt><strong><code>timeout</code></strong> :&ensp;<code>float</code>, optional</dt>
<dd>The maximum amount of time to wait for the event, in seconds. Defaults to 10.</dd>
<dt><strong><code>member_accessor</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>The name of the member to access on the component to find the observable to watch. Defaults to None.</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/westy/pyseext/blob/master/pyseext/observable_helper.py#L38-L73" class="git-link">View at GitHub</a>
</summary>
<pre><code class="python">def wait_for_event(self, component_cq: str, event_name: str, timeout: float = 10, member_accessor: Union[str, None] = None):
    &#34;&#34;&#34;Method to find an observable using a component query, optionally access a member on it (to get an owned observable),
    and then wait for an event with the specified name.

    Returns when the event has been caught, or throws if the timeout was reached or the observable could not be found or resolve to a single object.

    Args:
        component_cq (str): The component query to find the observable object, or the owner of the observable member.
        event_name (str): The name of the event to wait for.
        timeout (float, optional): The maximum amount of time to wait for the event, in seconds. Defaults to 10.
        member_accessor (str, optional): The name of the member to access on the component to find the observable to watch. Defaults to None.
    &#34;&#34;&#34;
    if member_accessor:
        self._logger.debug(&#34;Waiting for event &#39;%s&#39; on &#39;%s[%s]&#39;&#34;, event_name, component_cq, member_accessor)
        # Wrap in quotes
        member_accessor = f&#34;&#39;{member_accessor}&#39;&#34;
    else:
        self._logger.debug(&#34;Waiting for event &#39;%s&#39; on &#39;%s&#39;&#34;, event_name, component_cq)
        member_accessor = &#39;undefined&#39;

    async_script = self.get_async_script_content(self._WAIT_FOR_EVENT_TEMPLATE).format(component_cq = component_cq,
                                                                                       event_name =  event_name,
                                                                                       timeout = timeout,
                                                                                       member_accessor = member_accessor)
    self.ensure_javascript_loaded()

    result = self._driver.execute_async_script(async_script)

    if isinstance(result, str):
        # An error has been returned!
        raise ObservableHelper.WaitForEventException(component_cq, event_name, member_accessor, result)

    if member_accessor:
        self._logger.debug(&#34;Event &#39;%s&#39; on &#39;%s[%s]&#39; received!&#34;, event_name, component_cq, member_accessor)
    else:
        self._logger.debug(&#34;Event &#39;%s&#39; on &#39;%s&#39; received!&#34;, event_name, component_cq)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="pyseext.has_referenced_javascript.HasReferencedJavaScript" href="has_referenced_javascript.html#pyseext.has_referenced_javascript.HasReferencedJavaScript">HasReferencedJavaScript</a></b></code>:
<ul class="hlist">
<li><code><a title="pyseext.has_referenced_javascript.HasReferencedJavaScript.JavaScriptLoadedExpectation" href="has_referenced_javascript.html#pyseext.has_referenced_javascript.HasReferencedJavaScript.JavaScriptLoadedExpectation">JavaScriptLoadedExpectation</a></code></li>
<li><code><a title="pyseext.has_referenced_javascript.HasReferencedJavaScript.ensure_javascript_loaded" href="has_referenced_javascript.html#pyseext.has_referenced_javascript.HasReferencedJavaScript.ensure_javascript_loaded">ensure_javascript_loaded</a></code></li>
<li><code><a title="pyseext.has_referenced_javascript.HasReferencedJavaScript.get_async_script_content" href="has_referenced_javascript.html#pyseext.has_referenced_javascript.HasReferencedJavaScript.get_async_script_content">get_async_script_content</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite>.</p>
</footer>